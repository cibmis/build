KJE.SnowBallCalc=function(){this.CALC_INDEX=KJE.SnowBallCalc.CALC_TERM;this.CALC_COMPUTATION=KJE.SnowBallCalc.CALC_COMPUTATION_RATE;this.STUDENT_LOAN_CONSOLIDATE=false;this.STUDENT_LOAN_RATE=0;this.STUDENT_LOAN_AMOUNT=0;this.STUDENT_LOAN_CURR_PAYMENT=0;this.oldSTUDENT_LOAN_RATE=0;this.oldSTUDENT_LOAN_AMOUNT=0;this.oldSTUDENT_LOAN_CURR_PAYMENT=0;this.CC_USE_MINIMUM=false;this.TERM_MONTHS=0;this.MONTHS_SAVED=null;this.NEW_MONTHLY_PAYMENT=0;this.CURRENT_PAYOFF="";this.NEW_PAYOFF="";this.MSG_ERROR1=KJE.parameters.get("MSG_ERROR1","Please re-enter current student loan payment, current payment is lower than consolidated payment.");this.MSG_STARTS_IN=KJE.parameters.get("MSG_STARTS_IN","starts in month");this.MSG_PAYOFF_30=KJE.parameters.get("MSG_PAYOFF_30","more than 30 years");this.sOtherLabel=KJE.parameters.get("ARRAY_OTHER_LABEL",["Auto Loan 1","Auto Loan 2","Auto Loan 3","Personal Loan","Real-Estate Loan","Other Loan 1","Other Loan 2","Other Loan 3","Other Loan 4"]);this.AUTO_MONTHLY_PAYMENT=0;this.AUTO_AVERAGE_RATE=0;this.AUTO_OUTSTANDING_BALANCE=0;this.OTHER_MONTHLY_PAYMENT=0;this.OTHER_AVERAGE_RATE=0;this.OTHER_OUTSTANDING_BALANCE=0;this.CC_BALANCE=null;this.CC_RATE=null;this.CC_DESC=null;this.CC_PAYMENT=null;this.CC_RECALC_PAYMENT=null;this.ccBal=null;this.ccBalRolldown=null;this.ccBalRolldownAmount=null;this.LOAN_CURRENT_BALANCERollDown=null;this.LOAN_CURRENT_BALANCE=null;this.LOAN_PAYMENT=null;this.LOAN_INTEREST_RATE=null;this.LOAN_CURRENT_BALANCERolldownAmount=null;this.LOAN_TITLE=null;this.LOAN_MONTHS_LEFT=null;this.LOAN_CURRENT_BALANCERolldownStart=null;this.ccBalRolldownStart=null;this.LOAN_CURRENT_BALANCERolldownEnd=null;this.ccBalRolldownEnd=null;this.ccBalRolldownStartAmt=null;this.LOAN_CURRENT_BALANCERolldownStartAmt=null;this.ccBalRolldownCurrentPayment=null;this.LOAN_CURRENT_BALANCECurrentPayment=null;this.loanBal=null;this.DS_BALANCE=null;this.DS_INTEREST=KJE.FloatArray(2);this.DS_INTEREST_BLD=new Array(2);this.DS_PAYMENT_CATS=[KJE.parameters.get("MSG_PAYMENT_CATS1","Current Interest "),KJE.parameters.get("MSG_PAYMENT_CATS2","Snowball Interest ")];this.DS_NEW_BALANCE=null;this.CC_NAME=null;this.DR_BALANCE=null;this.DR_INTEREST=null;this.DR_PAYMENT=null;this.DR_PRINCIPAL=null;this.DR_NEW_BALANCE=null;this.DR_NEW_PRINCIPAL=null;this.DR_NEW_INTEREST=null;this.DR_NEW_PAYMENT=null;this.OUTSTANDING_BALANCE=0;this.AVERAGE_RATE=0;this.MONTHLY_PAYMENT=0;this.cats=null;this.sSchedule=new KJE.Repeating()};KJE.SnowBallCalc.prototype.clear=function(){this.ADDITIONAL_AMOUNT=0};KJE.SnowBallCalc.prototype.calculate=function(O){var l=KJE;if(this.STUDENT_LOAN_CONSOLIDATE){if(this.oldSTUDENT_LOAN_RATE!=this.STUDENT_LOAN_RATE||this.oldSTUDENT_LOAN_AMOUNT!=this.STUDENT_LOAN_AMOUNT||this.oldSTUDENT_LOAN_CURR_PAYMENT!=this.STUDENT_LOAN_CURR_PAYMENT){this.STUDENT_LOAN_TERM=this.getStudentLoanTermYears(this.STUDENT_LOAN_AMOUNT);this.STUDENT_LOAN_NEW_PAYMENT=this.getStudentLoanPayment(this.STUDENT_LOAN_AMOUNT,this.STUDENT_LOAN_RATE/100);this.STUDENT_LOAN_SAVINGS=this.getStudentLoanSavings(this.STUDENT_LOAN_AMOUNT,this.STUDENT_LOAN_RATE/100,this.STUDENT_LOAN_CURR_PAYMENT);this.ADDITIONAL_AMOUNT=this.STUDENT_LOAN_SAVINGS;this.oldSTUDENT_LOAN_RATE=this.STUDENT_LOAN_RATE;this.oldSTUDENT_LOAN_AMOUNT=this.STUDENT_LOAN_AMOUNT;this.oldSTUDENT_LOAN_CURR_PAYMENT=this.STUDENT_LOAN_CURR_PAYMENT}}var k=this.ADDITIONAL_AMOUNT;var G=this.TERM_MONTHS;this.CREDIT_CARD_DETAILS="";this.DEBT_DETAILS_CC="";var F=0;var I=0;var t=0;var b=0;for(var E=0;E<this._iLNCount;E++){this.LOAN_CURRENT_BALANCERolldownAmount[E]=0;this.LOAN_CURRENT_BALANCERolldownStart[E]=-1;this.LOAN_CURRENT_BALANCERolldownEnd[E]=0}for(var E=0;E<this.iCCCount;E++){this.ccBal[E]=0;this.ccBalRolldown[E]=0;this.ccBalRolldownAmount[E]=0;this.ccBalRolldownStart[E]=-1;this.ccBalRolldownEnd[E]=0}this.OUTSTANDING_BALANCE=0;this.AVERAGE_RATE=0;this.MONTHLY_PAYMENT=0;this.AUTO_MONTHLY_PAYMENT=0;this.AUTO_OUTSTANDING_BALANCE=0;this.AUTO_AVERAGE_RATE=0;this.OTHER_MONTHLY_PAYMENT=0;this.OTHER_OUTSTANDING_BALANCE=0;this.OTHER_AVERAGE_RATE=0;for(var E=0;E<this._iLNCount;E++){if(this.LOAN_CURRENT_BALANCE[E]>0){this.MONTHLY_PAYMENT+=this.LOAN_PAYMENT[E]}this.OUTSTANDING_BALANCE+=this.LOAN_CURRENT_BALANCE[E];this.AVERAGE_RATE+=this.LOAN_CURRENT_BALANCE[E]*this.LOAN_INTEREST_RATE[E];if(E<this._iALCount){if(this.LOAN_CURRENT_BALANCE[E]>0){this.AUTO_MONTHLY_PAYMENT+=this.LOAN_PAYMENT[E]}this.AUTO_OUTSTANDING_BALANCE+=this.LOAN_CURRENT_BALANCE[E];this.AUTO_AVERAGE_RATE+=this.LOAN_CURRENT_BALANCE[E]*this.LOAN_INTEREST_RATE[E]}else{if(this.LOAN_CURRENT_BALANCE[E]>0){this.OTHER_MONTHLY_PAYMENT+=this.LOAN_PAYMENT[E]}this.OTHER_OUTSTANDING_BALANCE+=this.LOAN_CURRENT_BALANCE[E];this.OTHER_AVERAGE_RATE+=this.LOAN_CURRENT_BALANCE[E]*this.LOAN_INTEREST_RATE[E]}}var h=0;var f=0;for(var E=0;E<this.iCCCount;E++){this.CC_PAYMENT[E]=this.CCPayment(this.CC_USE_MINIMUM,this.CC_BALANCE[E],this.CC_PAYMENT[E],this.CC_RATE[E]/100,false);this.CC_RECALC_PAYMENT[E]=this.CCPayment(this.CC_USE_MINIMUM,this.CC_BALANCE[E],(this.bUSE_RATE_OVERRIDE?this.CC_RATE_OVERRIDE/12:this.CC_RATE[E]/1200),this.CC_PAYMENT[E],true);F+=this.CC_PAYMENT[E];t+=this.CC_BALANCE[E];if(E<5){h+=this.CC_BALANCE[E]}else{f+=this.CC_BALANCE[E]}I+=this.CC_BALANCE[E]*this.CC_RATE[E];if(this.CC_BALANCE[E]>0){this.MONTHLY_PAYMENT+=this.CC_PAYMENT[E]}this.OUTSTANDING_BALANCE+=this.CC_BALANCE[E];this.AVERAGE_RATE+=this.CC_BALANCE[E]*this.CC_RATE[E]}if(I>0&&t>0){I=(I/100)/t}else{I=0}if(this.AVERAGE_RATE>0&&this.OUTSTANDING_BALANCE>0){this.AVERAGE_RATE=(this.AVERAGE_RATE/100)/this.OUTSTANDING_BALANCE}else{this.AVERAGE_RATE=0}if(this.AUTO_AVERAGE_RATE>0&&this.AUTO_OUTSTANDING_BALANCE>0){this.AUTO_AVERAGE_RATE=(this.AUTO_AVERAGE_RATE/100)/this.AUTO_OUTSTANDING_BALANCE}else{this.AUTO_AVERAGE_RATE=0}if(this.OTHER_AVERAGE_RATE>0&&this.OTHER_OUTSTANDING_BALANCE>0){this.OTHER_AVERAGE_RATE=(this.OTHER_AVERAGE_RATE/100)/this.OTHER_OUTSTANDING_BALANCE}else{this.OTHER_AVERAGE_RATE=0}this.NEW_MONTHLY_PAYMENT=this.MONTHLY_PAYMENT+k;var L=new Array(this._iLNCount+this.iCCCount);var v=0;for(var C=0;C<this.iCCCount;C++){if(this.CC_BALANCE[C]>0){L[v]=new KJE.SnowBallLoan(C,this.CC_BALANCE[C],true,this.CC_RATE[C],this.CC_BALANCE[C]/this.CC_PAYMENT[C]);v++}}for(var C=0;C<this._iLNCount;C++){if(this.LOAN_CURRENT_BALANCE[C]>0){L[v]=new KJE.SnowBallLoan(C,this.LOAN_CURRENT_BALANCE[C],false,this.LOAN_INTEREST_RATE[C],this.LOAN_CURRENT_BALANCE[C]/this.LOAN_PAYMENT[C]);v++}}var g=null;if(v<=1){}else{if(v==2){if(KJE.SnowBallCalc.CALC_COMPUTATION_RATE==this.CALC_COMPUTATION?L[0].dRate<L[1].dRate:(KJE.SnowBallCalc.CALC_COMPUTATION_BALANCE==this.CALC_COMPUTATION?L[0].dAmount>L[1].dAmount:L[0].dTerm>L[1].dTerm)){g=L[0];L[0]=L[1];L[1]=g}}else{for(var H=v-1;H>0;H--){for(var u=0;u<H;u++){if(KJE.SnowBallCalc.CALC_COMPUTATION_RATE==this.CALC_COMPUTATION?L[u].dRate<L[u+1].dRate:(KJE.SnowBallCalc.CALC_COMPUTATION_BALANCE==this.CALC_COMPUTATION?L[u].dAmount>L[u+1].dAmount:L[u].dTerm>L[u+1].dTerm)){g=L[u];L[u]=L[u+1];L[u+1]=g}}}}}var z=KJE.SnowBallCalc.MAX_TERM_PAYOFF;var K=0;this.DR_BALANCE=KJE.FloatArray(z);this.DR_PRINCIPAL=KJE.FloatArray(z);this.DR_INTEREST=KJE.FloatArray(z);this.DR_PAYMENT=KJE.FloatArray(z);this.DR_NEW_PAYMENT=KJE.FloatArray(z);this.DR_NEW_BALANCE=KJE.FloatArray(z);this.DR_NEW_PRINCIPAL=KJE.FloatArray(z);this.DR_NEW_INTEREST=KJE.FloatArray(z);var J=this.calculateCurrent(this.OUTSTANDING_BALANCE,z);if(J==0){J=360;this.CURRENT_PAYOFF=this.MSG_PAYOFF_30}else{this.CURRENT_PAYOFF=KJE.getTermLabel(J,false)}this.CURRENT_PAYOFF_MONTHS=J;if(this.CALC_INDEX==KJE.SnowBallCalc.CALC_TERM){if(this.NEW_MONTHLY_PAYMENT>this.OUTSTANDING_BALANCE+this.DR_INTEREST[0]){this.NEW_MONTHLY_PAYMENT=this.OUTSTANDING_BALANCE+this.DR_INTEREST[0];k=this.NEW_MONTHLY_PAYMENT-this.MONTHLY_PAYMENT}G=this.calculateRolldown(this.OUTSTANDING_BALANCE,this.NEW_MONTHLY_PAYMENT,J,z,L,v)}else{var a=this.MONTHLY_PAYMENT;var s=this.MONTHLY_PAYMENT;var o=this.calculateRolldown(this.OUTSTANDING_BALANCE,a,J,z,L,v);if(o<=G){k=0;G=o;this.NEW_MONTHLY_PAYMENT=this.MONTHLY_PAYMENT}else{for(var C=0;C<20;C++){a+=(o>G||o==0?+s:-s);s/=2;o=this.calculateRolldown(this.OUTSTANDING_BALANCE,a,J,z,L,v)}this.NEW_MONTHLY_PAYMENT=a;k=this.NEW_MONTHLY_PAYMENT-this.MONTHLY_PAYMENT}}if(G==0){G=360;this.NEW_PAYOFF=this.MSG_PAYOFF_30}else{this.NEW_PAYOFF=KJE.getTermLabel(G,false)}this.DS_INTEREST[0]=this.INTEREST_CURRENT;this.DS_INTEREST_BLD[0]=l.dollars(this.INTEREST_CURRENT);this.DS_INTEREST[1]=this.INTEREST_NEW;this.DS_INTEREST_BLD[1]=l.dollars(this.INTEREST_NEW);this.MONTHS_SAVED=this.CURRENT_PAYOFF_MONTHS-G;if(O){var m=this.sSchedule;m.clearRepeat();m.addHeader({sCell:KJE._sHeadingUnderline,sContent:m.sReportCol("Current Payment Schedule",1),sFormat:"colspan=4"},{sCell:KJE._sHeadingUnderline,sContent:m.sReportCol("New Payment Schedule",2),sFormat:"colspan=3"});m.addHeader(m.sReportCol("Year",3),m.sReportCol("Payments",4),m.sReportCol("Interest",5),m.sReportCol("Balance",6),m.sReportCol("Payments",4),m.sReportCol("Interest",5),m.sReportCol("Balance",6));m.addRepeat("&nbsp;","&nbsp;","&nbsp;",l.dollars(this.OUTSTANDING_BALANCE),"&nbsp;","&nbsp;",l.dollars(this.OUTSTANDING_BALANCE))}var r=0;this.bGRAPH_MONTHS=true;z=J;var N=1;if(z>=120){this.bGRAPH_MONTHS=false;N=12}var w=Math.floor(z/N+1);this.cats=KJE.FloatArray(w);this.DS_BALANCE=KJE.FloatArray(w);this.DS_NEW_BALANCE=KJE.FloatArray(w);this.cats[r]="0";this.DS_BALANCE[r]=(this.OUTSTANDING_BALANCE);this.DS_NEW_BALANCE[r++]=(this.OUTSTANDING_BALANCE);var P=0;var B=0;var c=0;var e=0;for(E=1;E<=z;E++){K=E-1;if(E%N==0){this.cats[r]=""+(z<120?r*N:r);this.DS_BALANCE[r]=this.DR_BALANCE[K];this.DS_NEW_BALANCE[r++]=this.DR_NEW_BALANCE[K]}if(O){P+=this.DR_NEW_PAYMENT[K]-this.DR_NEW_PRINCIPAL[K];B+=this.DR_NEW_PAYMENT[K];c+=this.DR_PAYMENT[K]-this.DR_PRINCIPAL[K];e+=this.DR_PAYMENT[K];if((E%12)==0||E==z){m.addRepeat(l.number(Math.floor((E+11)/12)),l.dollars(e),l.dollars(c),l.dollars(this.DR_BALANCE[K]),l.dollars(B),l.dollars(P),l.dollars(this.DR_NEW_BALANCE[K]));P=0;B=0;c=0;e=0}}}var M=new Array();var d=new Array();var D=new Array();var A=0;for(E=0;E<this.iCCCount;E++){if(this.CC_BALANCE[E]>0){this.DEBT_DETAILS_CC+="<tr class=KJEOddRow><td class='KJELabel KJECellBorder '>"+this.CC_NAME[E]+"</td><td class='KJECell KJECellBorder'>"+l.dollars(this.CC_BALANCE[E])+"</td><td class='KJECell KJECellBorder'>"+l.dollars(this.CC_PAYMENT[E],2)+"</td><td class='KJECell'>"+l.percent(this.CC_RATE[E])+"</td></tr>";d[A]="<tr class=KJEOddRow><th class='KJELabel KJECellBorder' scope='row'>"+this.CC_NAME[E]+"</th><td class='KJECell KJECellBorder'>"+l.dollars(this.CC_BALANCE[E])+"</td><td class='KJECell KJECellBorder'>"+(this.ccBalRolldownStart[E]<0?"N/A":l.dollars(this.ccBalRolldownStartAmt[E],2)+" "+this.MSG_STARTS_IN+" "+l.number(this.ccBalRolldownStart[E]+1))+"</td><td class='KJECell'>"+(this.ccBalRolldownEnd[E]==0?this.MSG_PAYOFF_30:(l.number(this.ccBalRolldownEnd[E]+1)+" "+KJE.MSG_MONTHS_LBL))+"</td></tr>";M[A]=(this.ccBalRolldownEnd[E]==0?KJE.SnowBallCalc.MAX_TERM_PAYOFF:this.ccBalRolldownEnd[E]);D[A]=A;A++}}for(E=0;E<this._iLNCount;E++){if(this.LOAN_CURRENT_BALANCE[E]>0){d[A]="<tr class=KJEOddRow><th class='KJELabel KJECellBorder' scope='row'>"+this.LOAN_TITLE[E]+"</th><td class='KJECell KJECellBorder'>"+l.dollars(this.LOAN_CURRENT_BALANCE[E])+"</td><td class='KJECell KJECellBorder'>"+(this.LOAN_CURRENT_BALANCERolldownStart[E]<0?"N/A":l.dollars(this.LOAN_CURRENT_BALANCERolldownStartAmt[E])+" "+this.MSG_STARTS_IN+" "+l.number(this.LOAN_CURRENT_BALANCERolldownStart[E]+1))+"</td><td class='KJECell'>"+(this.LOAN_CURRENT_BALANCERolldownEnd[E]==0?this.MSG_PAYOFF_30:(l.number(this.LOAN_CURRENT_BALANCERolldownEnd[E]+1)+" "+KJE.MSG_MONTHS_LBL))+"</td></tr>";M[A]=(this.LOAN_CURRENT_BALANCERolldownEnd[E]==0?KJE.SnowBallCalc.MAX_TERM_PAYOFF:this.LOAN_CURRENT_BALANCERolldownEnd[E]);D[A]=A;A++}}var g=null;if(A<=1){}else{if(A==2&&M[0]>M[1]){D[0]=1;D[1]=0}else{for(var H=A-1;H>0;H--){for(var u=0;u<H;u++){if(M[D[u]]>M[D[u+1]]){g=D[u];D[u]=D[u+1];D[u+1]=g}}}}}for(E=0;E<D.length;E++){this.CREDIT_CARD_DETAILS+=d[D[E]]}this.CC_OUTSTANDING_BALANCE1=h;this.CC_OUTSTANDING_BALANCE2=f;this.CC_MONTHLY_PAYMENT=F;this.CC_AVERAGE_RATE=I;this.CC_OUTSTANDING_BALANCE=t;this.CURRENT_PAYOFF_MONTHS=b;this.ADDITIONAL_AMOUNT=k;this.TERM_MONTHS=G};KJE.SnowBallCalc.prototype.calculateRolldown=function(b,g,q,l,r,i){var e=KJE;var f=b;var d=g;var t=0;var s=0;var w=0;var v=0;var h=0;for(n=0;n<q;n++){this.DR_NEW_BALANCE[n]=0;this.DR_NEW_INTEREST[n]=0;this.DR_NEW_PAYMENT[n]=0;this.DR_NEW_PRINCIPAL[n]=0;f=0;var c=0;var p=0;for(var k=0;k<this.iCCCount;k++){if(this.CC_PAYMENT[k]>0){if(n==0){this.ccBalRolldown[k]=this.CC_BALANCE[k]}if(this.ccBalRolldownEnd[k]==0&&this.ccBalRolldown[k]<=0){this.ccBalRolldownEnd[k]=n-1}w=e.round(this.ccBalRolldown[k]*(this.bUSE_RATE_OVERRIDE?this.CC_RATE_OVERRIDE/12:this.CC_RATE[k]/1200),2);h=this.CCPayment(this.CC_USE_MINIMUM,this.ccBalRolldown[k],this.CC_PAYMENT[k],(this.bUSE_RATE_OVERRIDE?this.CC_RATE_OVERRIDE/12:this.CC_RATE[k]/1200),true);v=h-w;p+=(this.ccBalRolldown[k]>0?h:0);if(v>this.ccBalRolldown[k]){v=this.ccBalRolldown[k];h=v+w}c+=h;t+=w;this.ccBalRolldown[k]-=v;this.ccBalRolldownCurrentPayment[k]=h;if(n<l){this.DR_NEW_BALANCE[n]+=this.ccBalRolldown[k];this.DR_NEW_INTEREST[n]+=w;this.DR_NEW_PAYMENT[n]+=h;this.DR_NEW_PRINCIPAL[n]+=v}f+=this.ccBalRolldown[k]}}for(var k=0;k<this._iLNCount;k++){if(this.LOAN_PAYMENT[k]>0){if(n==0){this.LOAN_CURRENT_BALANCERollDown[k]=this.LOAN_CURRENT_BALANCE[k]}if(this.LOAN_CURRENT_BALANCERolldownEnd[k]==0&&this.LOAN_CURRENT_BALANCERollDown[k]<=1){this.LOAN_CURRENT_BALANCERolldownEnd[k]=n-1}var w=e.round(this.LOAN_CURRENT_BALANCERollDown[k]*(this.LOAN_INTEREST_RATE[k]/1200),2);var v=((this.LOAN_PAYMENT[k]-w)>this.LOAN_CURRENT_BALANCERollDown[k]?this.LOAN_CURRENT_BALANCERollDown[k]:this.LOAN_PAYMENT[k]-w);c+=w+v;p+=(this.LOAN_CURRENT_BALANCERollDown[k]>0?this.LOAN_PAYMENT[k]:0);t+=this.LOAN_CURRENT_BALANCERollDown[k]*(this.LOAN_INTEREST_RATE[k]/1200);this.LOAN_CURRENT_BALANCERollDown[k]-=v;this.LOAN_CURRENT_BALANCECurrentPayment[k]=w+v;if(n<l){this.DR_NEW_BALANCE[n]+=this.LOAN_CURRENT_BALANCERollDown[k];this.DR_NEW_INTEREST[n]+=w;this.DR_NEW_PRINCIPAL[n]+=v;this.DR_NEW_PAYMENT[n]+=v+w}f+=this.LOAN_CURRENT_BALANCERollDown[k]}}var a=d-c;var o=d-p;var m=0;for(var j=0;j<i;j++){if(r[j]!=null){if(r[j].bCreditCard){if(this.ccBalRolldown[r[j].iIndex]>0){if(this.ccBalRolldownStart[r[j].iIndex]<0&&a==o&&m==0){this.ccBalRolldownStart[r[j].iIndex]=n;this.ccBalRolldownStartAmt[r[j].iIndex]=this.ccBalRolldownCurrentPayment[r[j].iIndex]+o}this.ccBalRolldown[r[j].iIndex]-=a;f-=a;m+=a;if(this.ccBalRolldown[r[j].iIndex]<0){a=(-1)*this.ccBalRolldown[r[j].iIndex];f+=a;m-=a;this.ccBalRolldown[r[j].iIndex]=0}else{a=0}}}else{if(this.LOAN_CURRENT_BALANCERollDown[r[j].iIndex]>0){if(this.LOAN_CURRENT_BALANCERolldownStart[r[j].iIndex]<0&&a==o&&m==0){this.LOAN_CURRENT_BALANCERolldownStart[r[j].iIndex]=n;this.LOAN_CURRENT_BALANCERolldownStartAmt[r[j].iIndex]=this.LOAN_CURRENT_BALANCECurrentPayment[r[j].iIndex]+o}this.LOAN_CURRENT_BALANCERollDown[r[j].iIndex]-=a;f-=a;m+=a;if(this.LOAN_CURRENT_BALANCERollDown[r[j].iIndex]<0){a=(-1)*this.LOAN_CURRENT_BALANCERollDown[r[j].iIndex];f+=a;m-=a;this.LOAN_CURRENT_BALANCERollDown[r[j].iIndex]=0}else{a=0}}}}if(a==0){break}}if(n<l){this.DR_NEW_BALANCE[n]-=m;this.DR_NEW_PAYMENT[n]+=m;this.DR_NEW_PRINCIPAL[n]+=m;if(this.DR_NEW_BALANCE[n]<0){this.DR_NEW_PAYMENT[n]+=this.DR_NEW_BALANCE[n];this.DR_NEW_PRINCIPAL[n]+=this.DR_NEW_BALANCE[n];this.DR_NEW_BALANCE[n]=0}}if(f<=0&&s==0){s=n+1}}this.INTEREST_NEW=t;return s};KJE.SnowBallCalc.prototype.calculateCurrent=function(b,i){var k=KJE;var j=b;var d=0;var c=0;var e=0;var g=0;var h=0;var a=0;for(a=0;(a<KJE.SnowBallCalc.MAX_TERM_PAYOFF&&j>0);a++){this.DR_BALANCE[a]=0;this.DR_INTEREST[a]=0;this.DR_PAYMENT[a]=0;this.DR_PRINCIPAL[a]=0;j=0;for(var f=0;f<this.iCCCount;f++){if(this.CC_PAYMENT[f]>0){if(a==0){this.ccBal[f]=this.CC_BALANCE[f]}e=k.round(this.ccBal[f]*(this.CC_RATE[f]/1200),2);h=this.CCPayment(this.CC_USE_MINIMUM,this.ccBal[f],this.CC_PAYMENT[f],this.CC_RATE[f]/1200,false);g=h-e;if(g>this.ccBal[f]){g=this.ccBal[f];h=g+e}d+=e;this.ccBal[f]-=g;if(a<i){this.DR_BALANCE[a]+=this.ccBal[f];this.DR_INTEREST[a]+=e;this.DR_PAYMENT[a]+=h;this.DR_PRINCIPAL[a]+=g}j+=this.ccBal[f]}}for(var f=0;f<this._iLNCount;f++){if(this.LOAN_PAYMENT[f]>0){if(a==0){this.loanBal[f]=this.LOAN_CURRENT_BALANCE[f]}e=this.loanBal[f]*(this.LOAN_INTEREST_RATE[f]/1200);g=((this.LOAN_PAYMENT[f]-e)>this.loanBal[f]?this.loanBal[f]:this.LOAN_PAYMENT[f]-e);d+=e;this.loanBal[f]-=g;if(a<i){this.DR_BALANCE[a]+=this.loanBal[f];this.DR_INTEREST[a]+=e;this.DR_PAYMENT[a]+=e+g;this.DR_PRINCIPAL[a]+=g}j+=this.loanBal[f]}}if(j<=0&&c==0){c=a+1}}this.INTEREST_CURRENT=d;return c};KJE.SnowBallCalc.prototype.formatReport=function(b){var c=KJE;var a=this.iDecimal;var d=b;if(Math.floor(this.INTEREST_CURRENT)==Math.floor(this.INTEREST_NEW)){d=KJE.replace("MSG_INTEREST_SAVINGS","$0 less",d)}else{if(this.INTEREST_CURRENT>this.INTEREST_NEW){d=KJE.replace("MSG_INTEREST_SAVINGS",c.dollars(this.INTEREST_CURRENT-this.INTEREST_NEW)+" less",d)}else{d=KJE.replace("MSG_INTEREST_SAVINGS",c.dollars(this.INTEREST_NEW-this.INTEREST_CURRENT)+" more",d)}}d=KJE.replace("NEW_MONTHLY_PAYMENT",c.dollars(this.NEW_MONTHLY_PAYMENT,2),d);d=KJE.replace("INTEREST_SAVINGS",c.dollars(this.INTEREST_CURRENT-this.INTEREST_NEW),d);d=KJE.replace("MONTHS_SAVED",c.number(this.MONTHS_SAVED),d);d=KJE.replace("OTHER_OUTSTANDING_BALANCE",c.dollars(this.OTHER_OUTSTANDING_BALANCE),d);d=KJE.replace("OTHER_MONTHLY_PAYMENT",c.dollars(this.OTHER_MONTHLY_PAYMENT,2),d);d=KJE.replace("OTHER_AVERAGE_RATE",c.percent(this.OTHER_AVERAGE_RATE,2),d);d=KJE.replace("AUTO_OUTSTANDING_BALANCE",c.dollars(this.AUTO_OUTSTANDING_BALANCE),d);d=KJE.replace("AUTO_MONTHLY_PAYMENT",c.dollars(this.AUTO_MONTHLY_PAYMENT,2),d);d=KJE.replace("AUTO_AVERAGE_RATE",c.percent(this.AUTO_AVERAGE_RATE,2),d);d=KJE.replace("CC_OUTSTANDING_BALANCE",c.dollars(this.CC_OUTSTANDING_BALANCE),d);d=KJE.replace("CC_MONTHLY_PAYMENT",c.dollars(this.CC_MONTHLY_PAYMENT,2),d);d=KJE.replace("CC_AVERAGE_RATE",c.percent(this.CC_AVERAGE_RATE,2),d);d=KJE.replace("OUTSTANDING_BALANCE",c.dollars(this.OUTSTANDING_BALANCE),d);d=KJE.replace("MONTHLY_PAYMENT",c.dollars(this.MONTHLY_PAYMENT,2),d);d=KJE.replace("AVERAGE_RATE",c.percent(this.AVERAGE_RATE,2),d);d=KJE.replace("ADDITIONAL_AMOUNT",c.dollars(this.ADDITIONAL_AMOUNT,2),d);d=KJE.replace("CURRENT_PAYOFF",this.CURRENT_PAYOFF,d);d=KJE.replace("NEW_PAYOFF",this.NEW_PAYOFF,d);d=KJE.replace("INTEREST_CURRENT",c.dollars(this.INTEREST_CURRENT),d);d=KJE.replace("TOTAL_PAYMENTS_CURRENT",c.dollars(this.INTEREST_CURRENT+this.OUTSTANDING_BALANCE),d);d=KJE.replace("INTEREST_NEW",c.dollars(this.INTEREST_NEW),d);d=KJE.replace("INTEREST_SAVINGS",c.dollars(this.INTEREST_CURRENT-this.INTEREST_NEW),d);d=KJE.replace("<!--CREDIT_CARD_DETAILS-->",this.CREDIT_CARD_DETAILS,d);d=KJE.replace("<!--DEBT_DETAILS_CC-->",this.DEBT_DETAILS_CC,d);d=KJE.replace("STUDENT_LOAN_TERM",c.number(this.STUDENT_LOAN_TERM,2),d);d=KJE.replace("STUDENT_LOAN_RATE",c.percent(this.STUDENT_LOAN_RATE/100,2),d);d=KJE.replace("STUDENT_LOAN_CURR_PAYMENT",c.dollars(this.STUDENT_LOAN_CURR_PAYMENT,2),d);d=KJE.replace("STUDENT_LOAN_AMOUNT",c.dollars(this.STUDENT_LOAN_AMOUNT),d);d=KJE.replace("STUDENT_LOAN_NEW_PAYMENT",c.dollars(this.STUDENT_LOAN_NEW_PAYMENT,2),d);d=KJE.replace("STUDENT_LOAN_SAVINGS",c.dollars(this.STUDENT_LOAN_SAVINGS,2),d);d=KJE.replace("CC_RATE_OVERRIDE",c.percent(KJE.SnowBallCalc.CC_RATE_OVERRIDE,2),d);d=KJE.replace("MSG_METHOD",KJE.SnowBallCalc.CALC_COMPUTATION_DESC[this.CALC_COMPUTATION].toLowerCase(),d);d=d.replace("**REPEATING GROUP**",this.sSchedule.getRepeat());this.sSchedule.clearRepeat();return d};KJE.SnowBallCalc.prototype.setLoanCount=function(d,a,c){this.iCCCount=d;this._iLNCount=a;this._iALCount=c;this.CC_BALANCE=KJE.FloatArray(d);this.CC_RATE=KJE.FloatArray(d);this.CC_PAYMENT=KJE.FloatArray(d);this.CC_RECALC_PAYMENT=KJE.FloatArray(d);this.CC_NAME=new Array(d);this.ccBal=KJE.FloatArray(d);this.ccBalRolldown=KJE.FloatArray(d);this.ccBalRolldownAmount=KJE.FloatArray(d);this.ccBalRolldownStartAmt=KJE.FloatArray(d);this.ccBalRolldownStart=new Array(d);this.ccBalRolldownCurrentPayment=KJE.FloatArray(d);for(var b=0;b<d;b++){this.ccBalRolldownStart[b]=-1}this.ccBalRolldownEnd=new Array(d);this.LOAN_CURRENT_BALANCE=KJE.FloatArray(a);this.LOAN_CURRENT_BALANCERollDown=KJE.FloatArray(a);this.LOAN_PAYMENT=KJE.FloatArray(a);this.LOAN_MONTHS_LEFT=new Array(a);this.LOAN_INTEREST_RATE=KJE.FloatArray(a);this.LOAN_TITLE=new Array(a);for(var b=0;b<a;b++){this.LOAN_TITLE[b]=(this.sOtherLabel.length>b?this.sOtherLabel[b]:"")}this.LOAN_CURRENT_BALANCERolldownAmount=KJE.FloatArray(a);this.LOAN_CURRENT_BALANCERolldownStartAmt=KJE.FloatArray(a);this.LOAN_CURRENT_BALANCERolldownStart=new Array(a);this.LOAN_CURRENT_BALANCECurrentPayment=KJE.FloatArray(a);for(var b=0;b<this.LOAN_CURRENT_BALANCERolldownStart.length;b++){this.LOAN_CURRENT_BALANCERolldownStart[b]=-1}this.LOAN_CURRENT_BALANCERolldownEnd=new Array(a);this.loanBal=KJE.FloatArray(a);for(var e=0;e<d;e++){this.CC_NAME[e]=KJE.parameters.get("CC_NAME_"+(e+1),KJE.parameters.get("MSG_CREDIT_CARD","Credit card")+" "+(e+1))}this.CC_USE_MINIMUM=KJE.parameters.get("CC_MINIMUMS",true)};KJE.SnowBallCalc.prototype.CCPayment=function(d,e,g,f,b){var a=KJE.round((KJE.SnowBallCalc.bUSE_MIN_PERC_OVERRIDE&&b?KJE.SnowBallCalc.CC_MIN_BAL_PERC_OVERRIDE:KJE.SnowBallCalc.CC_MIN_BAL_PERC)*e,2);if(d||g==0){a=(a<KJE.SnowBallCalc.CC_MIN?KJE.SnowBallCalc.CC_MIN:a);var c=KJE.round(e*(f/12),2);if((a-c)>e){a=e+c}}else{a=g}return(e<=0?0:a)};KJE.SnowBallCalc.prototype.getStudentLoanPayment=function(a,c){var b=this.getStudentLoanTermYears(a);return KJE.round(KJE.PMT(c/12,b*12,a),2)};KJE.SnowBallCalc.prototype.getStudentLoanSavings=function(b,d,c){var a=c-this.getStudentLoanPayment(b,d);if(a<0){throw (this.MSG_ERROR1)}return a};KJE.SnowBallCalc.prototype.getStudentLoanTermYears=function(a){var b=12;if(a>=60000){b=30}else{if(a>=40000){b=25}else{if(a>=20000){b=20}else{if(a>=10000){b=15}}}}return b};KJE.SnowBallLoan=function(c,g,a,f,e){this.iIndex=c;this.dAmount=g;this.bCreditCard=a;this.dRate=f;this.dTerm=e};KJE.SnowBallCalc.CC_MIN=10;KJE.SnowBallCalc.CC_RATE_OVERRIDE=9;KJE.SnowBallCalc.CC_MIN_BAL_PERC=0.04;KJE.SnowBallCalc.CC_MIN_BAL_PERC_OVERRIDE=0.025;KJE.SnowBallCalc.bUSE_RATE_OVERRIDE=false;KJE.SnowBallCalc.bUSE_MIN_PERC_OVERRIDE=false;KJE.SnowBallCalc.RateStudentLoan=6;KJE.SnowBallCalc.CALC_TERM=0;KJE.SnowBallCalc.CALC_PAYMENT=1;KJE.SnowBallCalc.CALC_INDEX=[KJE.SnowBallCalc.CALC_TERM,KJE.SnowBallCalc.CALC_PAYMENT];KJE.SnowBallCalc.CALC_DESC=KJE.parameters.get("ARRAY_CALC_DESC",["Months to debt freedom","Additional amount"]);KJE.SnowBallCalc.CALC_COMPUTATION_TERM=0;KJE.SnowBallCalc.CALC_COMPUTATION_BALANCE=1;KJE.SnowBallCalc.CALC_COMPUTATION_RATE=2;KJE.SnowBallCalc.CALC_COMPUTATION_INDEX=[KJE.SnowBallCalc.CALC_COMPUTATION_TERM,KJE.SnowBallCalc.CALC_COMPUTATION_BALANCE,KJE.SnowBallCalc.CALC_COMPUTATION_RATE];KJE.SnowBallCalc.CALC_COMPUTATION_DESC=KJE.parameters.get("ARRAY_CALC_DESC",["Debt with fewest payments left","Debt with smallest balance","Debt with highest interest rate"]);KJE.SnowBallCalc.MAX_TERM_PAYOFF=362;KJE.CalcName="Stream-Lined Snowball Debt Elimination Calculator";KJE.CalcType="SnowBall3";KJE.CalculatorTitleTemplate="Paying KJE2 per month pays off your debt in KJE1.";KJE.parseInputs=function(b){var a=KJE.getDropBox("CALC_INDEX",KJE.parameters.get("CALC_INDEX",KJE.SnowBallCalc.CALC_PAYMENT),KJE.SnowBallCalc.CALC_INDEX,KJE.SnowBallCalc.CALC_DESC);b=KJE.replace("**CALC_INDEX**",a,b);var a=KJE.getDropBox("CALC_COMPUTATION",KJE.parameters.get("CALC_COMPUTATION",KJE.SnowBallCalc.CALC_COMPUTATION_BALANCE),KJE.SnowBallCalc.CALC_COMPUTATION_INDEX,KJE.SnowBallCalc.CALC_COMPUTATION_DESC);b=KJE.replace("**CALC_COMPUTATION**",a,b);return b};KJE.initialize=function(){KJE.CalcControl=new KJE.SnowBallCalc();KJE.GuiControl=new KJE.SnowBall(KJE.CalcControl)};KJE.SnowBall=function(j){var f=KJE;var w=KJE.gLegend;var p=KJE.inputs.items;this.CC_COUNT=KJE.Default.CC_COUNT;this.LN_COUNT=KJE.Default.LN_COUNT;this.AL_COUNT=KJE.Default.AL_COUNT;this.MSG_MONTHLY_PAYMENT_LBL=KJE.parameters.get("MSG_MONTHLY_PAYMENT_LBL","per month");j.setLoanCount(this.CC_COUNT,this.LN_COUNT,this.AL_COUNT);for(var r=0;r<KJE.Default.LN_COUNT;r++){KJE.parameters.getSet("LOAN_DESC"+(r+1),j.sOtherLabel[r])}for(var r=KJE.Default.CC_COUNT;r>0;r--){KJE.parameters.getSet("CC_DESC"+r,KJE.parameters.get("MSG_DEBT_NAME","Credit card")+" "+r)}KJE.DropBox("CALC_INDEX","Calculate",null,null,"bold");KJE.DropBox("CALC_COMPUTATION","Start payoff with",null,null,"bold");KJE.Checkbox("CC_USE_MINIMUM","Minimum Payments",true,"Use credit card minimums.");KJE.DollarSlider("ACCELERATE_BALANCE","Amount",0,100000,2);KJE.Label("MONTHLY_PAYMENT","Current payment");KJE.s_scale[8]=KJE.parameters.get("ARRAY_TERM_SCALE",[0,24,48,72,1,1,1]);KJE.s_label[8]=KJE.parameters.get("ARRAY_TERM_SCALE_LBL",["0","24","48","72"]);KJE.Slider("TERM_MONTHS","Months to debt freedom",0,480,0,f.FMT_NUMBER,1,KJE.parameters.get("TERM_SCALE_LABEL",KJE.s_label[8]),KJE.useScale(8));this.CC_PAYMENT=new Array(this.CC_COUNT);this.CC_BALANCE=new Array(this.CC_COUNT);this.CC_RATE=new Array(this.CC_COUNT);this.CC_DESC=new Array(this.CC_COUNT);this.MSG_GRAPH_CATS1=KJE.parameters.get("MSG_GRAPH_CATS1","Current payoff");this.MSG_GRAPH_ROLL1=KJE.parameters.get("MSG_GRAPH_ROLL1","Current balance year");this.MSG_GRAPH_CATS2=KJE.parameters.get("MSG_GRAPH_CATS2","Roll-down payoff");this.MSG_GRAPH_ROLL2=KJE.parameters.get("MSG_GRAPH_ROLL2","Roll-down balance year");this.LOAN_DESC=new Array(this.LN_COUNT);this.LOAN_CURRENT_BALANCE=new Array(this.LN_COUNT);this.LOAN_PAYMENT=new Array(this.LN_COUNT);this.LOAN_INTEREST_RATE=new Array(this.LN_COUNT);this.LOAN_MONTHS_LEFT=new Array(this.LN_COUNT);for(var o=0;o<this.CC_COUNT;o++){KJE.InputItem.AltHelpName="CC_DESC";this.CC_DESC[o]=KJE.StringInput("CC_DESC"+(o+1),KJE.parameters.get("MSG_CC_BALANCE"+(o+1),KJE.parameters.get("MSG_DEBT_NAME","Credit card")+" #"+(o+1)),null,null,"bold");KJE.InputItem.AltHelpName="CC_BALANCE";this.CC_BALANCE[o]=KJE.DollarSlider("CC_BALANCE"+(o+1),KJE.parameters.get("MSG_CC_BALANCE"+(o+1),"Balance"),0,10000000,0,0,1);KJE.InputItem.AltHelpName="CC_RATE";this.CC_RATE[o]=KJE.PercentSlider("CC_RATE"+(o+1),KJE.parameters.get("MSG_CC_RATE","Interest rate"),0,30,2);KJE.InputItem.AltHelpName="CC_PAYMENT";this.CC_PAYMENT[o]=KJE.DollarSlider("CC_PAYMENT"+(o+1),KJE.parameters.get("MSG_CC_PAYMENT","Payment"),0,1000000,0,0,1);if(j.CC_USE_MINIMUM){this.CC_PAYMENT[o].disable()}}for(var o=0;o<this.LN_COUNT;o++){KJE.InputItem.AltHelpName="LOAN_DESC";this.LOAN_DESC[o]=KJE.StringInput("LOAN_DESC"+(o+1),KJE.parameters.get("MSG_LOAN_BALANCE"+(o+1),j.sOtherLabel[o]),null,null,"bold");KJE.InputItem.AltHelpName="LOAN_CURRENT_BALANCE";this.LOAN_CURRENT_BALANCE[o]=KJE.DollarSlider("LOAN_CURRENT_BALANCE"+(o+1),KJE.parameters.get("MSG_LOAN_CURRENT_BALANCE"+(o+1),"Balance"),0,10000000,0,0,0);KJE.InputItem.AltHelpName="LOAN_INTEREST_RATE";this.LOAN_INTEREST_RATE[o]=KJE.PercentSlider("LOAN_INTEREST_RATE"+(o+1),KJE.parameters.get("MSG_LOAN_INTEREST_RATE","Interest rate"),0,30,2);KJE.InputItem.AltHelpName="LOAN_PAYMENT";this.LOAN_PAYMENT[o]=KJE.DollarSlider("LOAN_PAYMENT"+(o+1),KJE.parameters.get("MSG_LOAN_PAYMENT","Payment"),0,100000,2,0,1);KJE.InputItem.AltHelpName="LOAN_MONTHS_LEFT";this.LOAN_MONTHS_LEFT[o]=KJE.Label("LOAN_MONTHS_LEFT"+(o+1),KJE.parameters.get("MSG_LOAN_MONTHS_LEFT","Payments remaining"))}KJE.InputItem.AltHelpName=null;KJE.DollarSlider("ADDITIONAL_AMOUNT","Additional amount",0,100000,2);var t=KJE.gNewGraph(KJE.gLINE,"GRAPH1",true,false,KJE.colorList[1],KJE.parameters.get("MSG_GRAPHLABEL3","Debt Balance"));t._legend._iOrientation=(w.TOP_RIGHT);t._iArea=KJE.gGraphLine.AREA_SECOND_ONLY;var v=KJE.gNewGraph(KJE.gCATEGORIES,"GRAPH2",true,true,KJE.colorList[1],KJE.parameters.get("MSG_GRAPHLABEL5","Total Interest Payments"));v._legend._iOrientation=(w.TOP_RIGHT);v._showItemLabel=true;v._axisX.setVisible(false);KJE.addDiv("INPUTS",KJE.colorList[0]);if(KJE.DropperDefined("CC")){var a=KJE.parameters.get("MSG_CC_TITLE","Credit card debt:");var d=KJE.parameters.get("MSG_CC_CLOSETITLE","KJE1");var e=function(){return a+"|"+KJE.subText(KJE.getKJEReplaced(d,f.dollars(j.CC_OUTSTANDING_BALANCE1)),"KJERightBold")};KJE.addDropper(new KJE.Dropper("CC",false,e,e),KJE.colorList[0])}if(KJE.DropperDefined("CC2")){var u=KJE.parameters.get("MSG_CC2_TITLE","Additional credit cards:");var b=KJE.parameters.get("MSG_CC2_CLOSETITLE","KJE1");var k=function(){return u+"|"+KJE.subText(KJE.getKJEReplaced(b,f.dollars(j.CC_OUTSTANDING_BALANCE2)),"KJERightBold")};KJE.addDropper(new KJE.Dropper("CC2",false,k,k),KJE.colorList[0])}if(KJE.DropperDefined("AUTO")){var c=KJE.parameters.get("MSG_AUTO_TITLE","Auto loan debt:");var q=KJE.parameters.get("MSG_AUTO_CLOSETITLE","KJE1");var m=function(){return c+"|"+KJE.subText(KJE.getKJEReplaced(q,f.dollars(j.AUTO_OUTSTANDING_BALANCE)),"KJERightBold")};KJE.addDropper(new KJE.Dropper("AUTO",false,m,m),KJE.colorList[0])}if(KJE.DropperDefined("OTHER")){var s=KJE.parameters.get("MSG_OTHER_TITLE","Other loans & installment debt:");var g=KJE.parameters.get("MSG_OTHER_CLOSETITLE","KJE1");var h=function(){return s+"|"+KJE.subText(KJE.getKJEReplaced(g,f.dollars(j.OTHER_OUTSTANDING_BALANCE)),"KJERightBold")};KJE.addDropper(new KJE.Dropper("OTHER",false,h,h),KJE.colorList[0])}};KJE.SnowBall.prototype.setValues=function(c){var a=KJE.inputs.items;c.CALC_INDEX=a.CALC_INDEX.getValue();if(c.CALC_INDEX==KJE.SnowBallCalc.CALC_PAYMENT){c.TERM_MONTHS=a.TERM_MONTHS.getValue();a.TERM_MONTHS.enable();a.ADDITIONAL_AMOUNT.disable()}else{c.ADDITIONAL_AMOUNT=a.ADDITIONAL_AMOUNT.getValue();a.ADDITIONAL_AMOUNT.enable();a.TERM_MONTHS.disable()}var b=a.CC_USE_MINIMUM.getValue();if(c.CC_USE_MINIMUM!=b){if(b){for(var d=0;d<this.CC_COUNT;d++){this.CC_PAYMENT[d].disable()}c.CALC_CC_PAYMENT=true}else{for(var d=0;d<this.CC_COUNT;d++){this.CC_PAYMENT[d].enable()}c.CALC_CC_PAYMENT=false}c.CC_USE_MINIMUM=a.CC_USE_MINIMUM.getValue()}for(var d=0;d<this.CC_COUNT;d++){c.CC_NAME[d]=this.CC_DESC[d].getValue();c.CC_BALANCE[d]=this.CC_BALANCE[d].getValue();c.CC_RATE[d]=this.CC_RATE[d].getValue();c.CC_PAYMENT[d]=this.CC_PAYMENT[d].getValue()}for(var d=0;d<this.LN_COUNT;d++){if(d<this.LN_COUNT){c.LOAN_TITLE[d]=this.LOAN_DESC[d].getValue();c.LOAN_PAYMENT[d]=this.LOAN_PAYMENT[d].getValue();c.LOAN_CURRENT_BALANCE[d]=this.LOAN_CURRENT_BALANCE[d].getValue();c.LOAN_INTEREST_RATE[d]=this.LOAN_INTEREST_RATE[d].getValue()}}c.CALC_COMPUTATION=a.CALC_COMPUTATION.getValue()};KJE.SnowBall.prototype.refresh=function(f){var e=KJE;var d=KJE.gLegend;var b=KJE.inputs.items;var a=KJE.gGraphs[0];var c=KJE.gGraphs[1];KJE.setTitleTemplate(f.NEW_PAYOFF,e.dollars(f.NEW_MONTHLY_PAYMENT));a.removeAll();if(f.bGRAPH_MONTHS){a._titleXAxis.setText(KJE.MSG_MONTH_LBL)}else{a._titleXAxis.setText(KJE.MSG_YEAR_LBL)}a.setGraphCategories(f.cats);a.add(new KJE.gGraphDataSeries(f.DS_BALANCE,this.MSG_GRAPH_CATS1+" "+f.CURRENT_PAYOFF,a.getColor(1),null,this.MSG_GRAPH_ROLL1));a.add(new KJE.gGraphDataSeries(f.DS_NEW_BALANCE,this.MSG_GRAPH_CATS2+" "+f.NEW_PAYOFF,a.getColor(2),null,this.MSG_GRAPH_ROLL2));a.paint();c.removeAll();c.setGraphCategories(f.DS_PAYMENT_CATS);c._sGraphCategoriesBold=f.DS_INTEREST_BLD;c.add(new KJE.gGraphDataSeries(f.DS_INTEREST,this.MSG_GRAPH_CATS,a.getColor(1)));c.paint();if(f.CC_USE_MINIMUM){for(var g=0;g<this.CC_COUNT;g++){this.CC_PAYMENT[g].setValue(f.CC_PAYMENT[g],true)}}for(var g=0;g<this.LN_COUNT;g++){this.LOAN_MONTHS_LEFT[g].setText(f.LOAN_MONTHS_LEFT[g]?e.number(f.LOAN_MONTHS_LEFT[g]):"",true)}if(b.ADDITIONAL_AMOUNT){b.ADDITIONAL_AMOUNT.setValue(f.ADDITIONAL_AMOUNT,true)}if(b.MONTHLY_PAYMENT){b.MONTHLY_PAYMENT.setText(e.dollars(f.MONTHLY_PAYMENT,2)+(KJE.CalculatorWidth>350?(" "+this.MSG_MONTHLY_PAYMENT_LBL):""))}if(b.TERM_MONTHS){b.TERM_MONTHS.setValue(f.TERM_MONTHS,true)}};KJE.Default.CC_COUNT=10;KJE.Default.LN_COUNT=9;KJE.Default.AL_COUNT=3;KJE.parameters.set("CALC_INDEX_HIDE",true);KJE.parameters.set("TERM_MONTHS_HIDE",true);KJE.parameters.set("CC_USE_MINIMUM",false);KJE.parameters.set("CC_USE_MINIMUM_HIDE",true);KJE.parameters.set("MSG_ADDITIONAL_AMOUNT","Accelerator amount");KJE.parameters.set("CALC_COMPUTATION",KJE.SnowBallCalc.CALC_COMPUTATION_TERM);KJE.parameters.set("MSG_DEBT_NAME","Loan or Credit Card");KJE.parameters.set("MSG_CC_TITLE","Debt balances and payments:");KJE.Default.CC_COUNT=15;KJE.Default.LN_COUNT=0;KJE.Default.AL_COUNT=0;KJE.DefinitionIconPosition=1;KJE.InputScreenText=" <div id=KJE-D-INPUTS> <div id=\"KJE-C-CALC_INDEX\">**CALC_INDEX**</div> <div id='KJE-C-CALC_COMPUTATION'>**CALC_COMPUTATION**</div> <div style=\"height:10px\"></div> <div id='KJE-C-MONTHLY_PAYMENT'><div id='KJE-MONTHLY_PAYMENT' ></div></div> <div id='KJE-C-ADDITIONAL_AMOUNT'><input id='KJE-ADDITIONAL_AMOUNT' /></div> <div id='KJE-C-TERM_MONTHS'><input id='KJE-TERM_MONTHS' /></div> <div id='KJE-C-CC_USE_MINIMUM'><input id='KJE-CC_USE_MINIMUM' type=checkbox name='CC_USE_MINIMUM' /></div> <div style=\"height:10px\"></div> <div id='KJE-C-CC_DESC1'><input id='KJE-CC_DESC1' /></div> <div id='KJE-C-CC_BALANCE1'><input id='KJE-CC_BALANCE1' /></div> <div id='KJE-C-CC_RATE1'><input id='KJE-CC_RATE1' /></div> <div id='KJE-C-CC_PAYMENT1'><input id='KJE-CC_PAYMENT1' /></div> <hr class=KJEDivide /> <div id='KJE-C-CC_DESC2'><input id='KJE-CC_DESC2' /></div> <div id='KJE-C-CC_BALANCE2'><input id='KJE-CC_BALANCE2' /></div> <div id='KJE-C-CC_RATE2'><input id='KJE-CC_RATE2' /></div> <div id='KJE-C-CC_PAYMENT2'><input id='KJE-CC_PAYMENT2' /></div> <hr class=KJEDivide /> <div id='KJE-C-CC_DESC3'><input id='KJE-CC_DESC3' /></div> <div id='KJE-C-CC_BALANCE3'><input id='KJE-CC_BALANCE3' /></div> <div id='KJE-C-CC_RATE3'><input id='KJE-CC_RATE3' /></div> <div id='KJE-C-CC_PAYMENT3'><input id='KJE-CC_PAYMENT3' /></div> <hr class=KJEDivide /> <div id='KJE-C-CC_DESC4'><input id='KJE-CC_DESC4' /></div> <div id='KJE-C-CC_BALANCE4'><input id='KJE-CC_BALANCE4' /></div> <div id='KJE-C-CC_RATE4'><input id='KJE-CC_RATE4' /></div> <div id='KJE-C-CC_PAYMENT4'><input id='KJE-CC_PAYMENT4' /></div> <hr class=KJEDivide /> <div id='KJE-C-CC_DESC5'><input id='KJE-CC_DESC5' /></div> <div id='KJE-C-CC_BALANCE5'><input id='KJE-CC_BALANCE5' /></div> <div id='KJE-C-CC_RATE5'><input id='KJE-CC_RATE5' /></div> <div id='KJE-C-CC_PAYMENT5'><input id='KJE-CC_PAYMENT5' /></div> <hr class=KJEDivide /> <div id='KJE-C-CC_DESC6'><input id='KJE-CC_DESC6' /></div> <div id='KJE-C-CC_BALANCE6'><input id='KJE-CC_BALANCE6' /></div> <div id='KJE-C-CC_RATE6'><input id='KJE-CC_RATE6' /></div> <div id='KJE-C-CC_PAYMENT6'><input id='KJE-CC_PAYMENT6' /></div> <hr class=KJEDivide /> <div id='KJE-C-CC_DESC7'><input id='KJE-CC_DESC7' /></div> <div id='KJE-C-CC_BALANCE7'><input id='KJE-CC_BALANCE7' /></div> <div id='KJE-C-CC_RATE7'><input id='KJE-CC_RATE7' /></div> <div id='KJE-C-CC_PAYMENT7'><input id='KJE-CC_PAYMENT7' /></div> <hr class=KJEDivide /> <div id='KJE-C-CC_DESC8'><input id='KJE-CC_DESC8' /></div> <div id='KJE-C-CC_BALANCE8'><input id='KJE-CC_BALANCE8' /></div> <div id='KJE-C-CC_RATE8'><input id='KJE-CC_RATE8' /></div> <div id='KJE-C-CC_PAYMENT8'><input id='KJE-CC_PAYMENT8' /></div> <hr class=KJEDivide /> <div id='KJE-C-CC_DESC9'><input id='KJE-CC_DESC9' /></div> <div id='KJE-C-CC_BALANCE9'><input id='KJE-CC_BALANCE9' /></div> <div id='KJE-C-CC_RATE9'><input id='KJE-CC_RATE9' /></div> <div id='KJE-C-CC_PAYMENT9'><input id='KJE-CC_PAYMENT9' /></div> <hr class=KJEDivide /> <div id='KJE-C-CC_DESC10'><input id='KJE-CC_DESC10' /></div> <div id='KJE-C-CC_BALANCE10'><input id='KJE-CC_BALANCE10' /></div> <div id='KJE-C-CC_RATE10'><input id='KJE-CC_RATE10' /></div> <div id='KJE-C-CC_PAYMENT10'><input id='KJE-CC_PAYMENT10' /></div> <div style=\"height:10px\"></div> <div id='KJE-C-CC_DESC11'><input id='KJE-CC_DESC11' /></div> <div id='KJE-C-CC_BALANCE11'><input id='KJE-CC_BALANCE11' /></div> <div id='KJE-C-CC_RATE11'><input id='KJE-CC_RATE11' /></div> <div id='KJE-C-CC_PAYMENT11'><input id='KJE-CC_PAYMENT11' /></div> <div style=\"height:10px\"></div> <div id='KJE-C-CC_DESC12'><input id='KJE-CC_DESC12' /></div> <div id='KJE-C-CC_BALANCE12'><input id='KJE-CC_BALANCE12' /></div> <div id='KJE-C-CC_RATE12'><input id='KJE-CC_RATE12' /></div> <div id='KJE-C-CC_PAYMENT12'><input id='KJE-CC_PAYMENT12' /></div> <div style=\"height:10px\"></div> <div id='KJE-C-CC_DESC13'><input id='KJE-CC_DESC13' /></div> <div id='KJE-C-CC_BALANCE13'><input id='KJE-CC_BALANCE13' /></div> <div id='KJE-C-CC_RATE13'><input id='KJE-CC_RATE13' /></div> <div id='KJE-C-CC_PAYMENT13'><input id='KJE-CC_PAYMENT13' /></div> <div style=\"height:10px\"></div> <div id='KJE-C-CC_DESC14'><input id='KJE-CC_DESC14' /></div> <div id='KJE-C-CC_BALANCE14'><input id='KJE-CC_BALANCE14' /></div> <div id='KJE-C-CC_RATE14'><input id='KJE-CC_RATE14' /></div> <div id='KJE-C-CC_PAYMENT14'><input id='KJE-CC_PAYMENT14' /></div> <div style=\"height:10px\"></div> <div id='KJE-C-CC_DESC15'><input id='KJE-CC_DESC15' /></div> <div id='KJE-C-CC_BALANCE15'><input id='KJE-CC_BALANCE15' /></div> <div id='KJE-C-CC_RATE15'><input id='KJE-CC_RATE15' /></div> <div id='KJE-C-CC_PAYMENT15'><input id='KJE-CC_PAYMENT15' /></div> <div style=\"height:10px\"></div> </div> **GRAPH1** **GRAPH2** ";KJE.DefinitionText=" <div id='KJE-D-CALC_INDEX' ><dt>Calculate</dt><dd>To calculate the number of months to pay off your debt with an accelerator amount you enter select: \"Calculate: Months to debt freedom\". To calculate the accelerator amount required to meet a debt free goal that you enter select: \"Calculate: Additional amount\"</dd></div> <div id='KJE-D-CALC_COMPUTATION' ><dt>Start payoff with</dt><dd>Select the order you would like to pay off your debt.</dd></div> <div id='KJE-D-MONTHLY_PAYMENT' ><dt>Current payment</dt><dd>This is the total of your minimum monthly payments for all of your current loans and credit cards. This is your current total only. As your debt is paid off, the minimum monthly payment for credit cards can decrease. </dd></div> <div id='KJE-D-TERM_MONTHS' ><dt>Months until you are debt free</dt><dd>Number of months it will take to pay off all of your debt using the Snowball Debt Elimination method. The maximum repayment time your can enter is one that has no accelerator amount amount. In this scenario you pay your initial minimum payment amount until all of your debt is repaid. Even without any additional amount, this can be less than your current pay off using minimum payments that decrease over time (and don't snowball to the next loan when a loan is paid off). </dd></div> <div id='KJE-D-ADDITIONAL_AMOUNT' ><dt>Accelerator amount</dt><dd>This dollar amount is in addition to your monthly minimum payments that you will use to pay down your debt. The higher this amount, the faster your debt will be paid off. It is important that your accelerator amount is one that you can afford. For the snowball method to be effective you must be consistent in your payments. Should you choose an amount that is too high, you may become discouraged if you are unable to meet your payment goal.</dd></div> <div id='KJE-D-CC_BALANCE' ><dt>Balance</dt><dd>Your total current balance for this loan or credit card.</dd></div> <div id='KJE-D-CC_RATE' ><dt>rate</dt><dd>The annual percentage rate you pay for this loan or credit card. The rate you enter is used to calculate the interest on all future loan or credit card payments. The length of time to pay off this debt may be much greater than calculated if you enter a low promotional interest rate that is only good for a short period of time.</dd></div> <div id='KJE-D-CC_PAYMENT' ><dt>Payment</dt><dd>This is your monthly payment. </dd></div> ";KJE.ReportText=" <!--HEADING \"Snowball Debt Elimination Calculator \" HEADING--> <h2 class='KJEReportHeader KJEFontHeading'>Paying NEW_MONTHLY_PAYMENT per month pays off your debt in NEW_PAYOFF saving INTEREST_SAVINGS in interest.</h2> You owe a total of OUTSTANDING_BALANCE. Your current minimum monthly payment is MONTHLY_PAYMENT. If you continue to make the minimum payments the total interest paid will be INTEREST_CURRENT. It will take you CURRENT_PAYOFF to pay off this debt. **GRAPH** <p>Using the snowball method, your total payments would be NEW_MONTHLY_PAYMENT, which includes an accelerator amount of ADDITIONAL_AMOUNT per month. This could help you pay MSG_INTEREST_SAVINGS in interest. In addition, the time it will take you to pay off your debt is reduced to NEW_PAYOFF. This analysis assumes that each month you apply your snowball amount to the MSG_METHOD. **GRAPH** <div class=KJEReportTableDiv><table class='KJEReportTable'><caption class='KJEHeaderRow KJEHeading'>Snowball Debt Details</caption> <thead class='KJEReportTHeader'> <tr class=KJEHeaderRow ><td class=\"KJEHeading KJECell40\">&nbsp;</td><th class=\"KJEHeading KJECell20\" scope='col'>Amount<BR>Owed</th><th class=\"KJEHeading KJECell20\" scope='col'>Initial<BR>Snowball<BR>Monthly Payment*</th><th class=\"KJEHeading KJECell20\" scope='col'>Debt<BR>Paid In</th></tr> </thead> <!--CREDIT_CARD_DETAILS--> <tfoot class='KJEReportTFooter'> <tr class=KJEFooterRow><th class=\"KJELabel KJECellBorder\" scope='row'>Total </th><td class=\"KJELabel KJECellBorder\">OUTSTANDING_BALANCE</td><td class=\"KJELabel KJECellBorder\">NEW_MONTHLY_PAYMENT</td><td class=\"KJELabel\">NEW_PAYOFF</td></tr> </tfoot> </table> </div><BR>*Please note that this amount may increase as additional debt balances are paid off. <h2 class='KJEScheduleHeader KJEFontHeading'>Snowball Payment Schedule</h2> **REPEATING GROUP** ";
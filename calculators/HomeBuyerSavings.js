KJE.HomeBuyerSavingsCalc=function(){this.SAVING_FREQUENCY=KJE.Default.PAY_MONTHLY;this.YEARS_TO_SAVE=0;this.NBR_PERIODS=12;this.FRACTION_YEARS_TO_TARGET=0;this.DS_CURRENT=null;this.DS_NEW=null;this.PURCHASE_PRICE=0;this.DOWNPAYMENT_PERCENT=0;this.MSG_EXCEED=KJE.parameters.get("MSG_EXCEED","You're going to exceed your goal!");this.MSG_MADE=KJE.parameters.get("MSG_MADE","You are right on track!");this.MSG_FAIL=KJE.parameters.get("MSG_FAIL","You need to make a few changes in your plan.");this.sSchedule=new KJE.Repeating()};KJE.HomeBuyerSavingsCalc.prototype.clear=function(){this.AMT_CURRENT=0;this.ROR_INVEST=0;this.FED_TAX_RATE=0;this.STATE_TAX_RATE=0;this.INFLATION_RATE=0};KJE.HomeBuyerSavingsCalc.prototype.calculate=function(g){var c=KJE;var k=this.AMT_CURRENT;var b=this.ROR_INVEST;var h=c.round(this.PURCHASE_PRICE*(this.DOWNPAYMENT_PERCENT/100),0);var d=this.NBR_PERIODS=KJE.Default.PAY_FREQUENCY[this.SAVING_FREQUENCY];var a=this.YEARS_TO_SAVE*d;var j=this.ROR_MONTHLY_PERC=KJE.ROR_PERIOD(b/100,d);var l=c.round(this.solveForSaveAmt(h,k,j,a),2);this.DS_CURRENT=KJE.FloatArray(this.YEARS_TO_SAVE+1);this.DS_NEW=KJE.FloatArray(this.YEARS_TO_SAVE+1);this.cats=new Array(this.YEARS_TO_SAVE+1);if(g){var e=this.sSchedule;e.clearRepeat();e.addHeader(e.sReportCol("Year",1),e.sReportCol("Contributions",2),e.sReportCol("Interest",3),e.sReportCol("Balance",4));e.addRepeat("&nbsp;","&nbsp;","&nbsp;",c.dollars(k))}for(var f=0;f<this.DS_NEW.length;f++){this.cats[f]=""+(f);this.DS_NEW[f]=KJE.FV_AMT(j,f*d,k)+KJE.FV_BEGIN(j,f*d,l);if(g&&f>0){e.addRepeat(f,c.dollars(l*12,2),c.dollars(this.DS_NEW[f]-this.DS_NEW[f-1]-l*12,2),c.dollars(this.DS_NEW[f],2))}}this.MONTHS_BF_TARGET=a;this.AMT_TARGET=h;this.RQD_SAVE_MONTH=l};KJE.HomeBuyerSavingsCalc.prototype.formatReport=function(a){var b=KJE;var c=a;c=KJE.replace("AMT_CURRENT",b.dollars(this.AMT_CURRENT),c);c=KJE.replace("ROR_INVEST",b.percent(this.ROR_INVEST/100,2),c);c=KJE.replace("INFLATION_RATE",b.percent(this.INFLATION_RATE/100,2),c);c=KJE.replace("YEARS_TO_SAVE",b.number(this.YEARS_TO_SAVE),c);c=KJE.replace("ROR_MONTHLY_PERC",b.percent(this.ROR_MONTHLY_PERC,2),c);c=KJE.replace("RQD_SAVE_MONTH",b.dollars(this.RQD_SAVE_MONTH,2),c);c=KJE.replace("FRACTION_YEARS_TO_TARGET",b.number(this.FRACTION_YEARS_TO_TARGET,1),c);c=KJE.replace("YEARS_TO_TARGET",b.number(this.YEARS_TO_TARGET),c);c=KJE.replace("AMT_TARGET",b.dollars(this.AMT_TARGET),c);c=KJE.replace("NBR_PERIODS",b.number(this.NBR_PERIODS),c);c=KJE.replace("SAVING_FREQUENCY_LOWER",KJE.Default.PAY_PERIODS[this.SAVING_FREQUENCY].toLowerCase(),c);c=KJE.replace("SAVING_FREQUENCY",KJE.Default.PAY_PERIODS[this.SAVING_FREQUENCY],c);c=KJE.replace("PURCHASE_PRICE",b.dollars(this.PURCHASE_PRICE),c);c=KJE.replace("DOWNPAYMENT_PERCENT",b.percent(this.DOWNPAYMENT_PERCENT/100,2),c);c=c.replace("**REPEATING GROUP**",this.sSchedule.getRepeat());this.sSchedule.clearRepeat();return c};KJE.HomeBuyerSavingsCalc.prototype.solveForSaveAmt=function(a,b,g,d){var e=100000/2;var f=100000/4;for(var c=0;c<30;c++){if(this.ifTargetGreater(a,b,g,d,e)){e+=f}else{e-=f}f=f/2}return e};KJE.HomeBuyerSavingsCalc.prototype.ifTargetGreater=function(a,b,e,c,d){return(a>KJE.FV_AMT(e,c,b)+KJE.FV_BEGIN(e,c,d))};KJE.Default.PAY_WEEKLY=0;KJE.Default.PAY_ACCEL_WEEK=1;KJE.Default.PAY_ACCEL_BI=2;KJE.Default.PAY_BIWEEKLY=3;KJE.Default.PAY_2XMONTHLY=4;KJE.Default.PAY_MONTHLY=5;KJE.Default.PAY_PERIOD_IDs=[KJE.Default.PAY_WEEKLY,KJE.Default.PAY_ACCEL_WEEK,KJE.Default.PAY_ACCEL_BI,KJE.Default.PAY_BIWEEKLY,KJE.Default.PAY_2XMONTHLY,KJE.Default.PAY_MONTHLY];KJE.Default.PAY_PERIODS=["Weekly","Accelerated weekly","Accelerated bi-weekly","Bi-weekly","Semi-monthly","Monthly"];KJE.Default.PAY_FREQUENCY=[52,52,26,26,24,12];KJE.Default.getSaveDrop=function(b,a,c){return KJE.getDropBox(b,KJE.parameters.get(b,(!a?KJE.Default.PAY_BIWEEKLY:a)),[KJE.Default.PAY_WEEKLY,KJE.Default.PAY_BIWEEKLY,KJE.Default.PAY_2XMONTHLY,KJE.Default.PAY_MONTHLY],[KJE.Default.PAY_PERIODS[KJE.Default.PAY_WEEKLY],KJE.Default.PAY_PERIODS[KJE.Default.PAY_BIWEEKLY],KJE.Default.PAY_PERIODS[KJE.Default.PAY_2XMONTHLY],KJE.Default.PAY_PERIODS[KJE.Default.PAY_MONTHLY]],c)};KJE.CalcName="Home Buyer Savings Calculator";KJE.CalcType="HomeBuyerSavings";KJE.CalculatorTitleTemplate="Your Down Payment Savings Goal is KJE1";KJE.parseInputs=function(a){KJE.parameters.set("TERM_SHOW_ALL",true);KJE.parameters.set("TERM_MAXIMUM",12);a=KJE.replace("**YEARS_TO_SAVE**",KJE.getMortgageTermDrop("YEARS_TO_SAVE",30),a);return a};KJE.initialize=function(){KJE.CalcControl=new KJE.HomeBuyerSavingsCalc();KJE.GuiControl=new KJE.HomeBuyerSavings(KJE.CalcControl)};KJE.HomeBuyerSavings=function(f){var e=KJE;var c=KJE.gLegend;var b=KJE.inputs.items;KJE.DollarSlider("PURCHASE_PRICE","Purchase price of home",0,10000000,0,0,3);KJE.PercentSlider("DOWNPAYMENT_PERCENT","Down payment",1,100,0,2);KJE.DollarSlider("AMT_CURRENT","Amount currently saved",0,10000000,0,0,2);KJE.InvestRateSlider("ROR_INVEST","Expected rate of return");KJE.DropBox("YEARS_TO_SAVE","Years to save");var a=KJE.gNewGraph(KJE.gCOLUMN,"GRAPH1",true,false,KJE.colorList[1],KJE.parameters.get("MSG_GRAPH_TITLE","To reach your goal in KJE2 years, you need to save KJE1 each month"));a._legend.setVisible(false);a._legend._iOrientation=(c.TOP_RIGHT);a._titleXAxis.setText(KJE.parameters.get("MSG_GRAPH1","Years to Save"));a._axisX._fSpacingPercent=0.3;a._showItemLabel=true;a._showItemLabelOnTop=true;var d=KJE.parameters.get("MSG_DROPPER_TITLE","Home down payment inputs:");KJE.addDropper(new KJE.Dropper("INPUTS",true,d,d),KJE.colorList[0])};KJE.HomeBuyerSavings.prototype.setValues=function(b){var a=KJE.inputs.items;b.SAVING_FREQUENCY=KJE.Default.PAY_MONTHLY;b.PURCHASE_PRICE=a.PURCHASE_PRICE.getValue();b.DOWNPAYMENT_PERCENT=a.DOWNPAYMENT_PERCENT.getValue();b.YEARS_TO_SAVE=Math.round(a.YEARS_TO_SAVE.getValue());b.AMT_CURRENT=a.AMT_CURRENT.getValue();b.ROR_INVEST=a.ROR_INVEST.getValue()};KJE.HomeBuyerSavings.prototype.refresh=function(c){var b=KJE;var a=KJE.gGraphs[0];KJE.setTitleTemplate(b.dollars(c.AMT_TARGET));a.removeAll();a.setGraphCategories(c.cats);a.add(new KJE.gGraphDataSeries(c.DS_NEW,KJE.MSG_YEAR_LBL,a.getColor(1)));a.setTitleTemplate(b.dollars(c.RQD_SAVE_MONTH,2),b.number(c.YEARS_TO_SAVE));a.paint()};KJE.InputScreenText=" <div id=KJE-D-INPUTS><div id=KJE-P-INPUTS>Input information:</div></div> <div id=KJE-E-INPUTS > <div id='KJE-C-PURCHASE_PRICE'><input id='KJE-PURCHASE_PRICE' /></div> <div id='KJE-C-DOWNPAYMENT_PERCENT'><input id='KJE-DOWNPAYMENT_PERCENT' /></div> <div id='KJE-C-AMT_CURRENT'><input id='KJE-AMT_CURRENT' /></div> <div id='KJE-C-ROR_INVEST'><input id='KJE-ROR_INVEST' /></div> <div id='KJE-C-YEARS_TO_SAVE'>**YEARS_TO_SAVE**</div> <div style=\"height:10px\"></div> </div> **GRAPH1** ";KJE.DefinitionText=" <div id='KJE-D-PURCHASE_PRICE' ><dt>Purchase price of home</dt><dd>The total cost of the home you would like to purchase. Please keep in mind that the cost of buying a house is more than just the price of the house; there may be fees and closing costs associated with your mortgage as well.</dd></div> <div id='KJE-D-DOWNPAYMENT_PERCENT' ><dt>Estimated down payment</dt><dd>The portion of the property's sale price that is fully paid to the seller at closing. With conventional loans, a 20% down payment will allow you to forego carrying Private Mortgage Insurance (PMI).</dd></div> <div id='KJE-D-AMT_CURRENT' ><dt>Amount currently saved</dt><dd>Total amount you currently have saved for your new home.</dd></div> <div id='KJE-D-YEARS_TO_SAVE' ><dt>Years to save</dt><dd>The number of years you wish to save.</dd></div> <div id='KJE-D-ROR_INVEST' ><dt>Estimated interest rate on your savings</dt><dd>This is the interest rate you are currently earning on your saved amount. For the purposes of this calculator, taxation is not factored into the results.</dd></div> ";KJE.ReportText=' <!--HEADING "Home Down Payment Savings Calculator" HEADING--> <h2 class=\'KJEReportHeader KJEFontHeading\'>Your down payment Savings Goal is AMT_TARGET</h2>**GRAPH** <div class=KJEReportTableDiv><table class=KJEReportTable><caption class=\'KJEHeaderRow KJEHeading\'>Input Values</caption> <tbody class=\'KJEReportTBody\'> <tr class=KJEOddRow><th class="KJELabel KJECellBorder KJECell60" scope=\'row\'>Purchase price of home</th><td class="KJECell KJECell40">PURCHASE_PRICE</td></tr> <tr class=KJEEvenRow><th class="KJELabel KJECellBorder" scope=\'row\'>Estimated down payment </th><td class="KJECell">DOWNPAYMENT_PERCENT</td></tr> <tr class=KJEOddRow><th class="KJELabel KJECellBorder" scope=\'row\'>Amount currently saved </th><td class="KJECell">AMT_CURRENT</td></tr> <tr class=KJEEvenRow><th class="KJELabel KJECellBorder" scope=\'row\'>Years to save </th><td class="KJECell">YEARS_TO_SAVE</td></tr> <tr class=KJEOddRow><th class="KJELabel KJECellBorder" scope=\'row\'>Estimated interest rate on your savings</th><td class="KJECell">ROR_INVEST</td></tr> <tr class=KJEEvenRow><th class="KJELabel KJECellBorder" scope=\'row\'>Home down payment savings goal </th><td class="KJECell">AMT_TARGET</td></tr> <tr class=KJEOddRow><th class="KJELabel KJECellBorder" scope=\'row\'>SAVING_FREQUENCY savings </th><td class="KJECell">RQD_SAVE_MONTH</td></tr> </tbody> </table> </div> <h2 class=\'KJEScheduleHeader KJEFontHeading\'>Savings Results by Year</h2> **REPEATING GROUP** ';